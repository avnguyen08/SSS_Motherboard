Version 4
SHEET 1 1636 680
WIRE -112 -48 -240 -48
WIRE -48 -48 -112 -48
WIRE 144 -48 144 -320
WIRE 640 0 640 -32
WIRE 1232 32 1040 32
WIRE -240 48 -240 32
WIRE -160 48 -240 48
WIRE -48 48 -80 48
WIRE -240 80 -240 48
WIRE 144 112 144 48
WIRE 1040 112 1040 32
WIRE 1104 112 1040 112
WIRE 1232 128 1232 32
WIRE 1232 128 1168 128
WIRE 144 144 144 112
WIRE 464 144 336 144
WIRE 656 144 544 144
WIRE 896 144 656 144
WIRE 1104 144 896 144
WIRE 896 192 896 144
WIRE 1136 224 1136 160
WIRE 656 240 656 144
WIRE -208 304 -240 304
WIRE 144 304 144 224
WIRE 656 336 656 304
WIRE 896 336 896 272
WIRE -320 416 -320 304
WIRE -208 416 -208 304
FLAG -112 -48 PWM
FLAG -240 80 0
FLAG 144 304 COM
FLAG -320 416 0
FLAG -208 416 COM
FLAG 144 -320 12V
FLAG 640 -112 12V
FLAG 640 0 COM
FLAG 144 112 Vout
FLAG 656 336 COM
FLAG 656 144 Filtered_PWM
FLAG 896 336 COM
FLAG 1136 96 12V
FLAG 1136 224 COM
FLAG 336 144 Vout
SYMBOL voltage -240 -64 R0
WINDOW 3 -427 116 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 3 0 10n 10n 5u 10u 20)
SYMATTR InstName V1
SYMBOL Optos\\PC817A 48 0 R0
SYMATTR InstName U1
SYMBOL res -64 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 5
SYMBOL res -224 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1Mega
SYMBOL res 128 128 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL voltage 640 -128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=3m
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res 560 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 500
SYMBOL cap 640 240 R0
SYMATTR InstName C1
SYMATTR Value .01µ
SYMBOL res 880 176 R0
SYMATTR InstName R5
SYMATTR Value 500
SYMBOL OpAmps\\UniversalOpAmp 1136 128 R0
SYMATTR InstName U2
TEXT -272 136 Left 2 !.tran 50u
